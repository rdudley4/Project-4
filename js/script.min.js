var currentImage;var currentSrc;var $clicked;var $lightbox=$("#lightbox");var $lbImage=$(".selected");var $controls=$("#controls");var firstImage=imgDatabase[0].src;var lastImage=imgDatabase[imgDatabase.length-1].src;var lightboxIsActive=false;var prevClicked=false;var nextClicked=false;function assembleImage(b){var a=$('<div class="image-card"></div>');var c=$('<span class="image-title"></span>');var d=$('<a href="'+b.src+'"</a>');c.text(b.title);d.append(b.thumbnail,c);a.append(d);$("#gallery").append(a)}function nextImage(){for(i=0;i<imgDatabase.length;i++){if(prevClicked&&currentSrc===imgDatabase[i].src){if(currentSrc===firstImage){currentSrc=lastImage;console.log("First image detected, going to end of series.");return currentSrc}else{currentSrc=imgDatabase[(i-1)].src;return currentSrc}}else{if(nextClicked&&currentSrc===imgDatabase[i].src){if(currentSrc===lastImage){currentSrc=firstImage;console.log("Last image detected, going to start of series.");return currentSrc}else{currentSrc=imgDatabase[(i+1)].src;return currentSrc}}}}}function updateImage(){currentSrc=nextImage();$lbImage.fadeOut(function(){$lbImage.attr("src",currentSrc).fadeIn()})}function updateDescription(){for(i=0;i<imgDatabase.length;i++){if(currentSrc===imgDatabase[i].src){$(".description").text(imgDatabase[i].caption)}}}$(".animsition").animsition({inClass:"fade-in-left-lg",outClass:"fade-out-left-lg",inDuration:1000,outDuration:400});$("body").append($lightbox);for(var i=0;i<imgDatabase.length;i++){currentImage=imgDatabase[i];assembleImage(currentImage)}$(".image-card a").on("click",function(a){a.preventDefault();$clicked=$(this);currentSrc=$clicked.attr("href");$lbImage.attr("src",currentSrc);updateDescription();lightboxIsActive=true;$lightbox.fadeIn(300);console.log("Lightbox Activated")});$controls.children("#prev").on("click",function(){prevClicked=true;nextClicked=false;updateImage();updateDescription();console.log("Moving to previous image in series: "+currentSrc)});$controls.children("#next").on("click",function(){prevClicked=false;nextClicked=true;updateImage();updateDescription();console.log("Moving to next image in series: "+currentSrc)});$controls.children("#download").on("click",function(){console.log("Download trigger has fired.")});$controls.children("#close").on("click",function(){$lightbox.fadeOut(250);lightboxIsActive=false;console.log("Lightbox Closed")});$(document).keydown(function(b){var a=b.which;if(lightboxIsActive){switch(a){case 27:$lightbox.fadeOut(250);lightboxIsActive=false;console.log("Lightbox Closed.");break;case 37:$controls.children("#prev").trigger("click");break;case 39:$controls.children("#next").trigger("click");break}}});