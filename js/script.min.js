var currentImage;var currentSrc;var $clicked;var $lightbox=$("#lightbox");var $lbImage=$(".selected");var $controls=$("#controls");var firstImage=imgDatabase[0].src;var lastImage=imgDatabase[imgDatabase.length-1].src;var lightboxIsActive=false;var prevClicked=false;var nextClicked=false;function assembleImage(l){var f=$('<div class="gallery-item"></div>');var c=$('<div class="front"></div>');var d=$('<div class="back"></div>');var a=l.thumbnail;var g=$('<a href="'+l.src+'"></a>');var b=$('<div class="details"></div>');var h=$('<span class="title"></span>');var e=$('<i class="fa fa-expand fa-3x" aria-hidden="true"></i>');var j=$('<span class="resolution">'+l.resolution+"</span>");var k=$('<span class="image-id">ID - '+l.id+"</span>");c.append(a);h.append(l.title);b.append(e,h,j,k);g.append(b);d.append(g);f.append(c,d);$("#gallery").append(f)}function nextImage(){for(i=0;i<imgDatabase.length;i++){if(prevClicked&&currentSrc===imgDatabase[i].src){if(currentSrc===firstImage){currentSrc=lastImage;console.log("First image detected, going to end of series.");return currentSrc}else{currentSrc=imgDatabase[(i-1)].src;return currentSrc}}else{if(nextClicked&&currentSrc===imgDatabase[i].src){if(currentSrc===lastImage){currentSrc=firstImage;console.log("Last image detected, going to start of series.");return currentSrc}else{currentSrc=imgDatabase[(i+1)].src;return currentSrc}}}}}function updateImage(){currentSrc=nextImage();$lbImage.fadeOut(function(){$lbImage.attr("src",currentSrc).fadeIn()})}function updateDescription(){for(i=0;i<imgDatabase.length;i++){if(currentSrc===imgDatabase[i].src){$(".description").text(imgDatabase[i].caption)}}}$(document).ready(function(){$("body").velocity({opacity:1},800).append($lightbox);for(var a=0;a<imgDatabase.length;a++){currentImage=imgDatabase[a];assembleImage(currentImage)}$(".back a").on("click",function(b){b.preventDefault();$clicked=$(this);currentSrc=$clicked.attr("href");$lbImage.attr("src",currentSrc);updateDescription();lightboxIsActive=true;$lightbox.fadeToggle(300);console.log("Lightbox Activated")});$controls.children("#prev").on("click",function(){prevClicked=true;nextClicked=false;updateImage();updateDescription();console.log("Moving to previous image in series: "+currentSrc)});$controls.children("#next").on("click",function(){prevClicked=false;nextClicked=true;updateImage();updateDescription();console.log("Moving to next image in series: "+currentSrc)});$controls.children("#download").on("click",function(){console.log("Download trigger has fired.")});$controls.children("#close").on("click",function(){$lightbox.fadeToggle(250);lightboxIsActive=false;console.log("Lightbox Closed")});$("#help").on("click",function(){$("#controls-help").slideToggle()});$(document).keydown(function(c){var b=c.which;if(lightboxIsActive){switch(b){case 27:$lightbox.fadeToggle(250);lightboxIsActive=false;console.log("Lightbox Closed.");break;case 37:$controls.children("#prev").trigger("click");break;case 39:$controls.children("#next").trigger("click");break;case 73:$("#help").trigger("click")}}})});